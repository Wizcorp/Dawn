---
# the image to use for vagrant and the default user for that image
image: "centos/7"
user: vagrant
# the base instance
base: &base
  groups: &base_groups
    ? docker
    ? swarm
    ? consul
  cpus: 2
  memory: 1024
  swarm: worker
instances:
  # leader nodes, hosts the registry
  control-1: &control
    <<: *base
    ip: 10.0.0.50
    labels:
      - dawn.node.type=control
    swarm: leader
    cpus: 4
    memory: 2048
    groups:
      <<: *base_groups
      ? control
      ? monitor
  # balancer nodes, usually one is more than enough
  edge-1: &edge
    <<: *base
    ip: 10.0.0.200
    labels:
      - dawn.node.type=edge
    memory: 512
    swarm: leader
    cpus: 1
    groups:
      <<: *base_groups
      ? edge
  # worker nodes are where the app actually run
  worker-1: &worker
    <<: *base
    ip: 10.0.0.100
    labels:
      - dawn.node.type=worker
      - dawn.node.subtype=app
    memory: 2048
  worker-2:
    <<: *worker
    ip: 10.0.0.101
#  worker-3:
#    <<: *worker
#    ip: 10.0.0.102
#  worker-4:
#    <<: *worker
#    ip: 10.0.0.103
